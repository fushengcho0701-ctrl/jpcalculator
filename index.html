<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç©ºé‹ / æµ·é‹ æˆæœ¬è©¦ç®—</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
    h2 { margin-top: 40px; }
    section { border: 2px solid #ccc; padding: 20px; border-radius: 10px; margin-bottom: 40px; }
    .row { margin-bottom: 12px; }
    label { display: inline-block; width: 200px; font-weight: bold; }
    input { padding: 5px; width: 140px; }
    .result { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
    .formula { color:#555; font-size:0.9em; margin-left:10px; }
  </style>
</head>
<body>

  <h1>ç©ºé‹ / æµ·é‹ æˆæœ¬è©¦ç®—</h1>

  <!-- âœˆï¸ ç©ºé‹ SECTION -->
  <section id="airSection">
    <h2>âœˆï¸ ç©ºé‹ âœˆï¸</h2>

    <h3>æ¯æ†åŸºæœ¬è³‡æ–™ï¼ˆå›ºå®šï¼‰</h3>
    <p>å°ºå¯¸ï¼š76 Ã— 56 Ã— 57 cm<br>V.W.ï¼š40.432 KG<br>æ¯æ†æ”¯æ•¸ï¼š160 æ”¯</p>

    <h3>è¼¸å…¥è³‡æ–™</h3>
    <div class="row">
      <label>æœ¬æ¬¡å‡ºè²¨æ†æ•¸ï¼š</label>
      <input type="number" id="air_bundles" value="0">
    </div>

    <div class="row">
      <label>ç©ºé‹ç´™ç®±ä½¿ç”¨é‡ï¼ˆå€‹ï¼‰ï¼š</label>
      <input type="number" id="air_box_qty" value="0" readonly>
      <span class="formula">ï¼ æ†æ•¸ Ã— 8</span>
    </div>

    <div class="row">
      <label>å¤©åœ°è“‹ä½¿ç”¨é‡ï¼ˆçµ„ï¼‰ï¼š</label>
      <input type="number" id="air_cover_qty" value="0" readonly>
      <span class="formula">ï¼ æ†æ•¸</span>
    </div>

    <p id="air_stem_info">æœ¬æ¬¡å‡ºè²¨æ”¯æ•¸ï¼š0 æ”¯</p>

    <button onclick="calcAir()">è¨ˆç®—ç©ºé‹æœ€ä½æ‹è³£é‡‘é¡</button>
    <div class="result" id="airResult">â€”</div>
    <div class="formula" id="airFormula"></div>
  </section>

  <!-- ğŸš¢ æµ·é‹ SECTION -->
  <section id="seaSection">
    <h2>ğŸš¢ æµ·é‹ ğŸš¢</h2>

    <h3>æ¯æ«ƒåŸºæœ¬è³‡æ–™ï¼ˆå›ºå®šï¼‰</h3>
    <p>æ»¿æ«ƒæ†æ•¸ï¼š180 æ†<br>æ»¿æ«ƒæ”¯æ•¸ï¼š28,800 æ”¯</p>

    <h3>è¼¸å…¥è³‡æ–™</h3>
    <div class="row">
      <label>æœ¬æ¬¡æµ·é‹æ”¯æ•¸ï¼š</label>
      <input type="number" id="sea_stems" value="0">
    </div>

    <div class="row">
      <label>æµ·é‹ç´™ç®±ä½¿ç”¨é‡ï¼ˆå€‹ï¼‰ï¼š</label>
      <input type="number" id="sea_box_qty" value="0" readonly>
      <span class="formula">ï¼ æ”¯æ•¸ Ã· 20 ï¼ˆç„¡æ¢ä»¶é€²ä½ï¼‰</span>
    </div>

    <div class="row">
      <label>å¤©åœ°è“‹ä½¿ç”¨é‡ï¼ˆçµ„ï¼‰ï¼š</label>
      <input type="number" id="sea_cover_qty" value="0" readonly>
      <span class="formula">ï¼ æ”¯æ•¸ Ã· 160 ï¼ˆç„¡æ¢ä»¶é€²ä½ï¼‰</span>
    </div>

    <button onclick="calcSea()">è¨ˆç®—æµ·é‹æœ€ä½æ‹è³£é‡‘é¡</button>
    <div class="result" id="seaResult">â€”</div>
    <div class="formula" id="seaFormula"></div>
  </section>

<script>
  // å›ºå®šæˆæœ¬ï¼ˆå…©é‚Šå…±ç”¨ï¼‰
  const baseCosts = {
    collect: 16,
    package: 2.5,
    rack: 0.45,
    sleeve: 0.09,
    airBox: 1.3,
    seaBox: 1.35,
    cover: 0.13
  };

  const jpCosts = {
    inland: 1.04,
    customs: 1.52,
    fee10: 0.10,
    yms6: 0.06
  };

  // ç©ºé‹è²»ç”¨
  const airFees = {
    perKg: 24.67,
    miscPerKg: 1.57,
    perStemKg: 0.253
  };

  function calcAir() {
    const bundles = Number(document.getElementById('air_bundles').value);
    const stems = bundles * 20 * 8; // 1æ† = 8ç›’ï¼Œæ¯ç›’20æ”¯
    document.getElementById('air_stem_info').innerText = `æœ¬æ¬¡å‡ºè²¨æ”¯æ•¸ï¼š${stems} æ”¯`;

    if (stems <= 0) {
      document.getElementById('airResult').innerText = 'è«‹è¼¸å…¥æœ‰æ•ˆæ†æ•¸ã€‚';
      document.getElementById('airFormula').innerText = '';
      return;
    }

    const boxQty = bundles * 8;
    document.getElementById('air_box_qty').value = boxQty;

    const coverQty = bundles;
    document.getElementById('air_cover_qty').value = coverQty;

    const weight = stems * airFees.perStemKg;
    const airFreight = weight * (airFees.perKg + airFees.miscPerKg);

    const fixedPerStem =
      baseCosts.collect +
      baseCosts.package +
      baseCosts.rack +
      baseCosts.sleeve +
      jpCosts.inland +
      jpCosts.customs;

    const totalFixed = fixedPerStem * stems;
    const packaging = boxQty * baseCosts.airBox + coverQty * baseCosts.cover;

    const totalCost = totalFixed + packaging + airFreight;

    const minAuctionTotal = totalCost / (1 - jpCosts.fee10 - jpCosts.yms6);
    const minAuctionPerStem = minAuctionTotal / stems;

    document.getElementById('airResult').innerText =
      `ç©ºé‹æœ€ä½æ‹è³£é‡‘é¡ï¼šæ¯æ”¯ $${minAuctionPerStem.toFixed(2)}`;

    document.getElementById('airFormula').innerHTML =
      `è©³ç´°æˆæœ¬æ‹†è§£ï¼š<br>
      ğŸ”¹ å›ºå®šæˆæœ¬ï¼ˆæ¯æ”¯ï¼‰ï¼š$${fixedPerStem.toFixed(2)}<br>
      ğŸ”¹ å›ºå®šæˆæœ¬ç¸½è¨ˆï¼š$${totalFixed.toFixed(2)}<br>
      ğŸ”¹ åŒ…æè²»ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰ï¼š ç©ºé‹ç´™ç®± ${boxQty} å€‹ Ã— $${baseCosts.airBox} ï¼‹ å¤©åœ°è“‹ ${coverQty} çµ„ Ã— $${baseCosts.cover} ï¼ $${packaging.toFixed(2)}<br>
      ğŸ”¹ ç©ºé‹è²»ç”¨ï¼šé‡é‡ ${weight.toFixed(2)} kg Ã— å–®åƒ¹ ${(airFees.perKg + airFees.miscPerKg).toFixed(2)} ï¼ $${airFreight.toFixed(2)}<br>
      ğŸ”¹ ç¸½æˆæœ¬ï¼š$${totalCost.toFixed(2)}<br><br>
      æ¨å°å…¬å¼ï¼š<br>
      X = ç¸½æˆæœ¬ + 10%X + 6%X â†’ X = ç¸½æˆæœ¬ / 0.84`;
  }

  function calcSea() {
    const stems = Number(document.getElementById('sea_stems').value);

    if (stems <= 0) {
      document.getElementById('seaResult').innerText = 'è«‹è¼¸å…¥æœ‰æ•ˆæ”¯æ•¸ã€‚';
      document.getElementById('seaFormula').innerText = '';
      return;
    }

    const boxQty = Math.ceil(stems / 20);
    document.getElementById('sea_box_qty').value = boxQty;

    const coverQty = Math.ceil(stems / 160);
    document.getElementById('sea_cover_qty').value = coverQty;

    const seaFreightPerStem = 1.91;

    const fixedPerStem =
      baseCosts.collect +
      baseCosts.package +
      baseCosts.rack +
      baseCosts.sleeve +
      jpCosts.inland +
      jpCosts.customs +
      seaFreightPerStem;

    const totalFixed = fixedPerStem * stems;
    const packaging = boxQty * baseCosts.seaBox + coverQty * baseCosts.cover;

    const totalCost = totalFixed + packaging;

    const minAuctionTotal = totalCost / (1 - jpCosts.fee10 - jpCosts.yms6);
    const minAuctionPerStem = minAuctionTotal / stems;

    document.getElementById('seaResult').innerText =
      `æµ·é‹æœ€ä½æ‹è³£é‡‘é¡ï¼šæ¯æ”¯ $${minAuctionPerStem.toFixed(2)}`;

    document.getElementById('seaFormula').innerHTML =
      `è©³ç´°æˆæœ¬æ‹†è§£ï¼š<br>
      ğŸ”¹ å›ºå®šæˆæœ¬ï¼ˆæ¯æ”¯ï¼‰ï¼š$${fixedPerStem.toFixed(2)}<br>
      ğŸ”¹ å›ºå®šæˆæœ¬ç¸½è¨ˆï¼š$${totalFixed.toFixed(2)}<br>
      ğŸ”¹ åŒ…æè²»ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰ï¼š æµ·é‹ç´™ç®± ${boxQty} å€‹ Ã— $${baseCosts.seaBox} ï¼‹ å¤©åœ°è“‹ ${coverQty} çµ„ Ã— $${baseCosts.cover} ï¼ $${packaging.toFixed(2)}<br>
      ğŸ”¹ ç¸½æˆæœ¬ï¼š$${totalCost.toFixed(2)}<br><br>
      æ¨å°å…¬å¼ï¼š<br>
      X = ç¸½æˆæœ¬ + 10%X + 6%X â†’ X = ç¸½æˆæœ¬ / 0.84`;
  }
</script>

</body>
</html>
