
<!DOCTYPE html><html lang="zh-Hant"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>æˆæœ¬è©¦ç®—</title>
<style>body{font-family:Arial;margin:20px;line-height:1.5}section{border:1px solid #aaa;padding:15px;margin-bottom:30px;border-radius:10px}.row{margin-bottom:10px}label{display:inline-block;width:180px;font-weight:bold}.formula{color:#555;font-size:.9em}</style>
</head><body>
<h1>ç©ºé‹ / æµ·é‹ æˆæœ¬è©¦ç®—</h1>

<section>
<h2>âœˆï¸ ç©ºé‹ âœˆï¸</h2>
<p>æ¯æ†160æ”¯ï¼›é‡é‡40.432kg<br>3.5å™¸=42æ†/$6000ï¼›17å™¸=190æ†/$13000ï¼›26å™¸=140æ†/$15000</p>

<div class="row"><label>é‹è¼¸è»Šæ¬¾ï¼š</label>
<select id="truck"><option value="3.5">3.5å™¸</option><option value="17">17å™¸</option><option value="26">26å™¸</option></select></div>

<div class="row"><label>æœ¬æ¬¡æ†æ•¸ï¼š</label><input id="air_bundle" type="number" value="0"></div>

<div class="row"><label>ç©ºé‹ç´™ç®±ï¼š</label><input id="air_box" readonly><span class="formula">=æ†Ã—8</span></div>
<div class="row"><label>å¤©åœ°è“‹ï¼š</label><input id="air_cover" readonly><span class="formula">=æ†</span></div>

<p id="air_stem">æœ¬æ¬¡å‡ºè²¨æ”¯æ•¸ï¼š0</p>
<p id="air_weight">é‡é‡ï¼š0 KG</p>

<button onclick="airCalc()">è¨ˆç®—ç©ºé‹æœ€ä½æ‹è³£é‡‘é¡</button>
<div id="airResult" style="font-weight:bold;margin-top:10px"></div>
<div id="airDetail" class="formula"></div>
</section>

<section>
<h2>ğŸš¢ æµ·é‹ ğŸš¢</h2>
<div class="row"><label>æµ·é‹æ”¯æ•¸ï¼š</label><input id="sea_stem" type="number"></div>
<div class="row"><label>ç´™ç®±ï¼š</label><input id="sea_box" readonly><span class="formula">=æ”¯Ã·20</span></div>
<div class="row"><label>å¤©åœ°è“‹ï¼š</label><input id="sea_cover" readonly><span class="formula">=æ”¯Ã·160</span></div>
<button onclick="seaCalc()">è¨ˆç®—æµ·é‹æœ€ä½æ‹è³£é‡‘é¡</button>
<div id="seaResult" style="font-weight:bold;margin-top:10px"></div>
<div id="seaDetail" class="formula"></div>
</section>

<script>
const base={collect:16,pack:2.5,rack:0.45,sleeve:0.09,airBox:1.3,seaBox:1.35,cover:0.13};
const jp={inland:1.04,customs:1.52,fee:0.10,yms:0.06};
const airFee={perKg:24.67,misc:1.57,stemKg:0.253};
const trucks={ "3.5":{max:42,fee:6000},"17":{max:190,fee:13000},"26":{max:140,fee:15000} };

function pickTruck(b){
 if(b<=42)return "3.5";
 if(b<=190)return "17";
 if(b<=140)return "26";
 return null;
}

function airCalc(){
 let b=Number(air_bundle.value);
 let stems=b*160;
 air_stem.textContent="æœ¬æ¬¡å‡ºè²¨æ”¯æ•¸ï¼š"+stems;

 if(b<=0){airResult.textContent="è«‹è¼¸å…¥æ†æ•¸";return;}

 let sel=truck.value;
 let rule=trucks[sel];

 if(b>rule.max){
   let auto=pickTruck(b);
   if(!auto){alert("è¶…é26å™¸æœ€å¤§è¼‰é‡140æ†");return;}
   alert("å·²è‡ªå‹•åˆ‡æ›ç‚º "+auto+" å™¸");
   truck.value=auto;
   rule=trucks[auto];
 }

 let twPer=rule.fee/stems;
 let twTotal=rule.fee;

 air_weight.textContent="é‡é‡ï¼š"+(stems*airFee.stemKg).toFixed(2)+" KGï¼ˆå°ç£é‹è¼¸/æ”¯ $"+twPer.toFixed(2)+"ï¼‰";

 air_box.value=b*8;
 air_cover.value=b;

 let weight=stems*airFee.stemKg;
 let airCost=weight*(airFee.perKg+airFee.misc);

 let fix=[["æ”¶èŠ±",base.collect],["åŒ…è£",base.pack],["èŠ±æ¶",base.rack],["è¢–å¥—",base.sleeve],
         ["æ—¥æœ¬å…§é™¸",jp.inland],["æ—¥æœ¬å ±é—œ",jp.customs],["å°ç£é‹è¼¸",twPer]];
 let fixSum=fix.reduce((s,i)=>s+i[1],0);
 let fixTotal=fixSum*stems;

 let pkg=b*8*base.airBox + b*base.cover;
 let total=fixTotal+pkg+airCost;

 let x=total/0.84;
 let per=x/stems;
 let jpy=per/0.2;

 airResult.textContent="ç©ºé‹æœ€ä½æ‹è³£é‡‘é¡ï¼š$"+per.toFixed(2)+" / Â¥"+jpy.toFixed(0);

 airDetail.innerHTML=
   "å›ºå®šæˆæœ¬æ¯æ”¯ï¼š<br>"+fix.map(i=>"â€¢ "+i[0]+"ï¼š$"+i[1].toFixed(2)).join("<br>")+
   "<br>åˆè¨ˆï¼š$"+fixSum.toFixed(2)+
   "<br><br>å°ç£é‹è¼¸ç¸½é¡ï¼š$"+twTotal+
   "<br><br>å›ºå®šæˆæœ¬ç¸½è¨ˆï¼š$"+fixTotal.toFixed(2)+
   "<br><br>åŒ…æè²»ï¼š$"+pkg.toFixed(2)+
   "<br>ç©ºé‹è²»ï¼š$"+airCost.toFixed(2)+
   "<br>ç¸½æˆæœ¬ï¼š$"+total.toFixed(2)+
   "<br><br>å…¬å¼ï¼šX = ç¸½æˆæœ¬ / 0.84";
}

function seaCalc(){
 let s=Number(sea_stem.value);
 if(s<=0){seaResult.textContent="è«‹è¼¸å…¥æ”¯æ•¸";return;}

 let box=Math.ceil(s/20);
 let cover=Math.ceil(s/160);
 sea_box.value=box;
 sea_cover.value=cover;

 let seaF=1.91;

 let fixPer=base.collect+base.pack+base.rack+base.sleeve+jp.inland+jp.customs+seaF;
 let fixTotal=fixPer*s;
 let pkg=box*base.seaBox + cover*base.cover;
 let total=fixTotal+pkg;
 let x = total / 0.84;
 let per = x / s;
 let jpy = per / 0.2;


seaResult.textContent =
  "æµ·é‹æœ€ä½æ‹è³£é‡‘é¡ï¼šæ¯æ”¯ $" + per.toFixed(2) + " / Â¥" + jpy.toFixed(0);
 
 seaDetail.innerHTML=
   "å›ºå®šæˆæœ¬æ¯æ”¯ï¼š$"+fixPer.toFixed(2)+
   "<br>å›ºå®šæˆæœ¬ç¸½è¨ˆï¼š$"+fixTotal.toFixed(2)+
   "<br>åŒ…æè²»ï¼š$"+pkg.toFixed(2)+
   "<br>ç¸½æˆæœ¬ï¼š$"+total.toFixed(2)+
   "<br>å…¬å¼ï¼šX = ç¸½æˆæœ¬ / 0.84";
}
</script>

</body></html>
